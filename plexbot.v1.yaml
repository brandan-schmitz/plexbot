openapi: 3.0.0
info:
  title: Plexbot
  version: 1.0.0
  description: Provides all the API functions necessary for the Plexbot to function.
  contact:
    name: Brandan Schmitz
    email: brandan.schmitz@celestialdata.net
servers:
  - url: 'https://api.real-debrid.com/rest/1.0'
    description: rdb
  - url: 'http://www.omdbapi.com'
    description: omdb
  - url: 'https://yts.mx/api/v2'
    description: yts
  - url: 'https://plex.tv'
    description: plex
  - url: 'http://{ipAddress}:{port}'
    description: plexServer
    variables:
      ipAddress:
        default: 0.0.0.0
        description: IP Address of the Plex Media Server
      port:
        default: '32400'
        description: Port of the Plex Media Server
components:
  schemas:
    RdbUser:
      type: object
      description: Real-Debrid User
      x-examples:
        Example:
          id: 1234567
          username: Demouser
          email: Dem*****@gmail.com
          points: 1750
          locale: en
          avatar: 'https://fcdn.real-debrid.com/images/forum/empty.png'
          type: premium
          premium: 9618452
          expiration: '2021-03-09T05:34:42.000Z'
      properties:
        id:
          type: integer
          description: User's ID
        username:
          type: string
          minLength: 1
          description: User's Username
        email:
          type: string
          minLength: 1
          description: User's Email
          format: email
        points:
          type: integer
          description: User's Fidelity Points
        locale:
          type: string
          minLength: 1
          description: User's Language
        avatar:
          type: string
          minLength: 1
          description: User's Avatar Image URL
          format: uri
        type:
          type: string
          minLength: 1
          description: User's Premium Status
          enum:
            - premium
            - free
        premium:
          type: integer
          description: User's emaining time as a premium user in seconds
        expiration:
          type: string
          minLength: 1
          description: Date at which the user loses their premium status
    RdbUnrestrictedLink:
      description: An unrestricted link on Real-Debrid
      type: object
      properties:
        id:
          type: string
          minLength: 1
          description: Unrestricted link ID
        filename:
          type: string
          minLength: 1
          description: Name of the file
        filesize:
          description: Size of the file in bytes (0 if unknown)
          type: integer
        link:
          type: string
          minLength: 1
          description: Original link
        host:
          type: string
          minLength: 1
          description: Hostname of the original server
          format: hostname
        chunks:
          type: integer
          description: Maximum number of chunks allowed
        crc:
          type: integer
          description: Disable or enable CRC checking
          enum:
            - 0
            - 1
        download:
          type: string
          minLength: 1
          description: Generated download link
          format: uri
        streamable:
          type: integer
          description: Is the file streamable
          enum:
            - 0
            - 1
        mimeType:
          type: string
          minLength: 1
          description: Type of the file based off its extension
        alternative:
          type: array
          uniqueItems: true
          minItems: 1
          items:
            $ref: '#/components/schemas/RbdUnrestrictedAlternativeLink'
        type:
          type: string
          description: 'Type of the file, generally its quality'
    RbdUnrestrictedAlternativeLink:
      description: Alternative download links for an unrestricted link on Real-Debrid.
      type: object
      properties:
        id:
          type: string
          minLength: 1
          description: Unrestricted Link ID
        filename:
          type: string
          minLength: 1
          description: File Name
        download:
          type: string
          minLength: 1
          description: Download Link
          format: uri
        mimeType:
          type: string
          minLength: 1
          description: 'Type of file, generally based off its extension'
        type:
          type: string
          description: 'Type of file, generally based off its quality'
    RdbMagnetLink:
      description: Response generated when adding a magnet link
      type: object
      properties:
        id:
          type: string
          minLength: 1
          description: ID of the created torrent
        uri:
          type: string
          minLength: 1
          description: URL of the created torrent
    RdbError:
      title: RdbError
      type: object
      description: Displays errors for Real-Debrid calls
      properties:
        error:
          type: string
          description: Error message
        error_code:
          type: integer
          description: 'Error code, reference here: https://api.real-debrid.com/#api_error_codes'
    RdbTorrentInfo:
      description: Information on a real-debrid torrent
      type: object
      title: ''
      properties:
        id:
          type: string
          minLength: 1
          description: Torrent ID
        filename:
          type: string
          minLength: 1
          description: Torrent filename
        original_filename:
          type: string
          minLength: 1
          description: Original name of the torrent
        hash:
          type: string
          minLength: 1
          description: SHA1 Hash of the torrent
        bytes:
          description: Size of selected files only
          type: integer
        original_bytes:
          description: Total size of the torrent
          type: integer
        host:
          type: string
          minLength: 1
          description: Host main domain
          format: hostname
        split:
          description: Split size of links
          type: integer
        progress:
          description: Progress of torrent download to real-debrid
          type: integer
        status:
          type: string
          minLength: 1
          description: Current status of the torrent
          enum:
            - magnet_error
            - magnet_conversion
            - waiting_files_selection
            - queued
            - downloading
            - downloaded
            - error
            - virus
            - compressing
            - uploading
            - dead
        added:
          type: string
          minLength: 1
          description: Date added
        files:
          type: array
          items:
            $ref: '#/components/schemas/RdbTorrentFile'
        links:
          type: array
          description: Host download links
          items:
            type: string
            format: uri
        ended:
          type: string
          minLength: 1
          description: Date/Time torrent finished downloading (Only present when status is downloaded)
        speed:
          type: integer
          description: 'Download speed in bytes (Only present in "downloading", "compressing", "uploading" status)'
        seeders:
          type: integer
          description: 'Number of seeders (Only present in "downloading", "magnet_conversion" status)'
    RdbTorrentFile:
      description: Information about a file within a real-debrid torrent
      type: object
      properties:
        id:
          type: integer
          description: File ID
        path:
          type: string
          minLength: 1
          description: Path to the file within the torrent folder
        bytes:
          type: integer
          description: Size of file in bytes
        selected:
          type: integer
          enum:
            - 0
            - 1
          description: Status of file selection
    YtsBaseResponse:
      description: Base response of request to YTS
      type: object
      title: YtsBaseResponse
      properties:
        status:
          type: string
          minLength: 1
          description: Request status
        status_message:
          type: string
          minLength: 1
          description: Request status message
        data:
          $ref: '#/components/schemas/YtsSearchResult'
      x-examples: {}
    YtsSearchResult:
      description: Data resulting from a search for a movie on YTS using the query_term parameter
      type: object
      properties:
        movie_count:
          type: integer
          description: Number of movies returned in this search
        limit:
          type: integer
          description: Maximum number of results displayed on a "page"
        page_number:
          type: integer
          description: Current "page" of results
        movies:
          type: array
          description: List of movies
          items:
            $ref: '#/components/schemas/YtsMovieInfo'
    YtsMovieInfo:
      description: Information about a specific movie available on YTS
      type: object
      x-examples: {}
      properties:
        id:
          type: integer
          description: YTS movie ID
        url:
          type: string
          minLength: 1
          description: Movie URL
        imdb_code:
          type: string
          minLength: 1
          description: Movie IMDB code
        title:
          type: string
          minLength: 1
          description: Movie Title
        title_english:
          type: string
          minLength: 1
          description: Movie Title (in english)
        title_long:
          type: string
          minLength: 1
          description: Full movie title
        slug:
          type: string
          minLength: 1
          description: Movie slug code
        year:
          type: integer
          description: Movie release year
        rating:
          type: integer
          description: Movie average rating
        runtime:
          type: integer
          description: Movie runtime (minutes)
        genres:
          type: array
          description: List of generes the movie is classified under
          items:
            type: string
        summary:
          type: string
          minLength: 1
          description: Summary of movie plot
        description_full:
          type: string
          minLength: 1
          description: Full length movie description
        synopsis:
          type: string
          minLength: 1
          description: Movie plot
        yt_trailer_code:
          type: string
          minLength: 1
          description: YTS Movie trailer code
        language:
          type: string
          minLength: 1
          description: Movie language
        mpa_rating:
          type: string
          description: Movie rating
        background_image:
          type: string
          minLength: 1
          description: Movie background image url
        background_image_original:
          type: string
          minLength: 1
          description: Movie original background image url
        small_cover_image:
          type: string
          minLength: 1
          description: Movie poster image (small)
        medium_cover_image:
          type: string
          minLength: 1
          description: Movie poster image (medium)
        large_cover_image:
          type: string
          minLength: 1
          description: Movie poster image (large)
        state:
          type: string
          minLength: 1
          description: Status of the movie listing
        torrents:
          type: array
          uniqueItems: true
          minItems: 1
          description: List of movie torrents
          items:
            $ref: '#/components/schemas/YtsTorrentInfo'
        date_uploaded:
          type: string
          minLength: 1
          description: Date uploaded
        date_uploaded_unix:
          type: integer
          description: Date uploaded (unix format)
    YtsTorrentInfo:
      description: ''
      type: object
      properties:
        url:
          type: string
          minLength: 1
          description: Torrent file download link
        hash:
          type: string
          minLength: 1
          description: Torrent hash
        quality:
          type: string
          minLength: 1
          description: Torrent quality
        type:
          type: string
          minLength: 1
          description: Torrent recording type
        seeds:
          type: integer
          description: Number of seeders
        peers:
          type: integer
          description: Number of peers
        size:
          type: string
          minLength: 1
          description: Torrent size
        size_bytes:
          type: integer
          description: Torrent size (bytes)
        date_uploaded:
          type: string
          minLength: 1
          description: Date uploaded
        date_uploaded_unix:
          type: integer
          description: Date uploaded (unix format)
    OmdbSearchResult:
      description: Result of searching for a movie on OMDB
      type: object
      title: ''
      properties:
        Search:
          type: array
          uniqueItems: true
          minItems: 1
          items:
            $ref: '#/components/schemas/OmdbItem'
        totalResults:
          type: string
          minLength: 1
        Response:
          type: string
          minLength: 1
          enum:
            - 'True'
            - 'False'
        Error:
          type: string
          minLength: 1
      required:
        - Search
        - totalResults
        - Response
        - Error
    OmdbItem:
      description: Information about item from OMDB
      type: object
      x-examples:
        example-1:
          Title: string
          Year: string
          Rated: string
          Released: string
          Runtime: string
          Genre: string
          Director: string
          Writer: string
          Actors: string
          Plot: string
          Language: string
          Country: string
          Awards: string
          Poster: string
          Ratings:
            - Source: string
              Value: string
          Metascore: string
          imdbRating: string
          imdbVotes: string
          imdbID: string
          Type: string
          DVD: string
          BoxOffice: string
          Production: string
          Website: string
          Response: string
      title: OmdbItem
      properties:
        Title:
          type: string
          minLength: 1
          description: Title
        Year:
          type: string
          minLength: 1
          description: Release Year
        Rated:
          type: string
          minLength: 1
          description: Rating
        Released:
          type: string
          minLength: 1
          description: Release Date
        Season:
          type: string
          minLength: 1
          description: Season Number
        Episode:
          type: string
          minLength: 1
          description: Episode Number
        Runtime:
          type: string
          minLength: 1
          description: Runtime (minutes)
        Genre:
          type: string
          minLength: 1
          description: Genres
        Director:
          type: string
          minLength: 1
          description: Director
        Writer:
          type: string
          minLength: 1
          description: Writers
        Actors:
          type: string
          minLength: 1
          description: Movie Actors
        Plot:
          type: string
          minLength: 1
          description: Plot
        Language:
          type: string
          minLength: 1
          description: Language
        Country:
          type: string
          minLength: 1
          description: Country
        Awards:
          type: string
          minLength: 1
          description: Awards
        Poster:
          type: string
          minLength: 1
          description: Poster URL
        Ratings:
          type: array
          uniqueItems: true
          minItems: 1
          description: Ratings
          items:
            $ref: '#/components/schemas/OmdbItemRating'
        Metascore:
          type: string
          minLength: 1
          description: Metascore
        imdbRating:
          type: string
          minLength: 1
          description: IMDB Ratings
        imdbVotes:
          type: string
          minLength: 1
          description: IMDB Votes
        imdbID:
          type: string
          minLength: 1
          description: IMDB ID
        seriesID:
          type: string
          minLength: 1
          description: TV Series IMDB ID
        Type:
          type: string
          minLength: 1
          description: Type
          enum:
            - episode
            - series
            - movie
        DVD:
          type: string
          minLength: 1
          description: DVD Sales
        BoxOffice:
          type: string
          minLength: 1
          description: Box Office Sales
        Production:
          type: string
          minLength: 1
          description: Production Cost
        Website:
          type: string
          minLength: 1
          description: Website
        Response:
          type: string
          minLength: 1
          enum:
            - 'True'
            - 'False'
          description: API Response Success State
        Error:
          type: string
          description: API Error Message (if error occurred)
    OmdbItemRating:
      description: Ratings for a movie from OMDB
      type: object
      properties:
        Source:
          type: string
          minLength: 1
          description: Rating Source
        Value:
          type: string
          minLength: 1
          description: Rating Value
      title: OmdbItemRating
    PlexUser:
      description: Represent a user in Plex
      type: object
      properties:
        user:
          type: object
          properties:
            id:
              type: integer
              description: User ID
            uuid:
              type: string
              minLength: 1
              description: User UUID
            email:
              type: string
              minLength: 1
              description: User email
              format: email
            joined_at:
              type: string
              minLength: 1
              description: Date user joined
            username:
              type: string
              minLength: 1
              description: User username
            title:
              type: string
              minLength: 1
              description: User display name
            thumb:
              type: string
              minLength: 1
              description: User thumbnail link
              format: uri
            authToken:
              type: string
              minLength: 1
              description: User auth token
            authentication_token:
              type: string
              minLength: 1
              description: User auth token
            subscription:
              type: object
              description: User subscription information
              properties:
                active:
                  type: boolean
                  description: Subscription active status
                status:
                  type: string
                  minLength: 1
                  description: Subscription status
                plan:
                  type: string
                  minLength: 1
                  description: Subscription plan
                features:
                  type: array
                  description: Subscription features
                  items:
                    type: string
            roles:
              type: object
              description: User roles
              properties:
                roles:
                  type: array
                  description: List of user roles
                  items:
                    type: string
            confirmedAt:
              type: string
              minLength: 1
              description: User confirmation date
            rememberMe:
              type: boolean
              description: User remember login
    RdbSelectFiles:
      title: RdbSelectFiles
      type: object
      description: DTO to select which files for RDB to download
      properties:
        files:
          type: string
          description: Selected files IDs (comma separated) or "all"
      required:
        - files
  securitySchemes:
    omdbApiKey:
      name: apikey
      type: apiKey
      in: query
      description: OMDB API Key
    rdbApiKey:
      type: http
      scheme: bearer
      description: Real Debrid API key
    plexAuth:
      type: http
      scheme: basic
      description: Plex authentication by username/password
    plexAuthToken:
      name: X-Plex-Token
      type: apiKey
      in: header
      description: Plex authentication by token
    plexClientIdentifier:
      name: X-Plex-Client-Identifier
      type: apiKey
      in: header
  responses: {}
  parameters: {}
  examples: {}
paths:
  /user:
    get:
      servers:
        - url: 'https://api.real-debrid.com/rest/1.0'
      summary: RDB - Get Current User
      tags:
        - RDB
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RdbUser'
        '401':
          description: 'Bad token (expired, invalid)'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RdbError'
        '403':
          description: Permission denied (account locked)
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RdbError'
      operationId: getUser
      description: Get the current real-debrid user info
      security:
        - rdbApiKey: []
  /unrestrict/link:
    post:
      servers:
        - url: 'https://api.real-debrid.com/rest/1.0'
      summary: RDB - Unrestrict a link
      operationId: unrestrictLink
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RdbUnrestrictedLink'
        '401':
          description: 'Bad token (expired, invalid)'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RdbError'
        '403':
          description: Permission denied (account locked)
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RdbError'
      tags:
        - RDB
      description: Unrestrict a real-debrid download link so it can be downloaded
      security:
        - rdbApiKey: []
      requestBody:
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                link:
                  type: string
                  description: The original hoster link
                  format: uri
              required:
                - link
  /torrents/addMagnet:
    post:
      summary: RDB - Add Magnet
      operationId: addMagnet
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RdbMagnetLink'
        '400':
          description: Bad Request (see error message)
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RdbError'
        '401':
          description: 'Bad token (expired, invalid)'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RdbError'
        '403':
          description: 'Permission denied (account locked, not premium)'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RdbError'
        '503':
          description: Service unavailable (see error message)
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RdbError'
      description: Add a magnet to Real-Debrid
      security:
        - rdbApiKey: []
      requestBody:
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                magnet:
                  type: string
                  description: Magnet link
              required:
                - magnet
      tags:
        - RDB
  '/torrents/info/{id}':
    parameters:
      - schema:
          type: string
        name: id
        in: path
        required: true
        description: Torrent ID
    get:
      summary: RDB - Get a torrent's info
      tags:
        - RDB
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RdbTorrentInfo'
        '401':
          description: 'Bad token (expired, invalid)'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RdbError'
        '403':
          description: Permission denied (account locked)
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RdbError'
        '404':
          description: Torrent not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RdbError'
      operationId: getTorrentInfo
      description: Get all information about the specified torrent on real-debrid
      security:
        - rdbApiKey: []
  '/torrents/selectFiles/{id}':
    parameters:
      - schema:
          type: string
        name: id
        in: path
        required: true
        description: Torrent ID
    post:
      summary: RDB - Select Torrent Files
      operationId: selectTorrentFiles
      responses:
        '202':
          description: Action already done
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RdbError'
        '204':
          description: Files Selected
        '400':
          description: Bad Request (see error message)
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RdbError'
        '401':
          description: 'Bad token (expired, invalid)'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RdbError'
        '403':
          description: 'Permission denied (account locked, not premium)'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RdbError'
        '404':
          description: Wrong parameter (invalid file id(s)) / Unknown ressource (invalid id)
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RdbError'
      tags:
        - RDB
      description: Select which files included in a torrent should be downloaded by Real-Debrid
      security:
        - rdbApiKey: []
      requestBody:
        content:
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/RdbSelectFiles'
        description: ''
  '/torrents/delete/{id}':
    parameters:
      - schema:
          type: string
        name: id
        in: path
        required: true
        description: Torrent ID
    delete:
      summary: ''
      operationId: deleteTorrent
      responses:
        '204':
          description: Torrent Deleted
        '401':
          description: 'Bad token (expired, invalid)'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RdbError'
        '403':
          description: Permission denied (account locked)
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RdbError'
        '404':
          description: Unknown Ressource
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RdbError'
      tags:
        - RDB
      description: Delete a torrent from real-debrid
      security:
        - rdbApiKey: []
  /list_movies.json:
    get:
      servers:
        - url: 'https://yts.mx/api/v2'
      summary: YTS - Search for a movie
      tags:
        - YTS
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/YtsBaseResponse'
      operationId: searchYts
      description: Get the information for a movie from YTS if it is available.
      parameters:
        - schema:
            type: string
          in: query
          name: query_term
          required: true
          description: 'Search by Movie Title/IMDb Code, Actor Name/IMDb Code, Director Name/IMDb Code '
  '/?s={search}':
    get:
      servers:
        - url: 'http://www.omdbapi.com'
      tags:
        - OMDB
      summary: OMDB - Search OMDB for a movie or TV show
      operationId: search
      parameters:
        - name: 'y'
          in: query
          description: Year of release
          required: false
          schema:
            type: integer
        - name: type
          in: query
          description: Return movie or series
          schema:
            type: string
            enum:
              - movie
              - series
          required: true
        - name: page
          in: query
          description: Page number to return
          required: false
          schema:
            type: integer
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/OmdbSearchResult'
        '401':
          description: Not authenticated
      security:
        - omdbApiKey: []
      description: Search OMDB for a movie or TV show
    parameters:
      - schema:
          type: string
        name: search
        in: path
        required: true
  '/?i={imdbCode}':
    parameters:
      - schema:
          type: string
        name: imdbCode
        in: path
        required: true
    get:
      servers:
        - url: 'http://www.omdbapi.com'
      summary: OMDB - Get information about a movie or TV show by its IMDB ID
      tags:
        - OMDB
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/OmdbItem'
      operationId: getById
      security:
        - omdbApiKey: []
      description: Get information about a movie or TV show from OMDB by its IMDB ID
      parameters: []
  /users/sign_in.json:
    post:
      summary: Plex - Sign In
      operationId: signIn
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PlexUser'
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    description: Error Message
      tags:
        - Plex
      description: Sign into a plex account and get a User object
      security:
        - plexAuth: []
        - plexClientIdentifier: []
  /library/sections/all/refresh:
    get:
      summary: Plex - Refresh Libraries
      operationId: refreshLibraries
      responses:
        '200':
          description: OK
        '401':
          description: Unauthorized
      description: Scan all media libraries on the Plex server to index new media.Scan all media libraries on the Plex server to index new media.
      security:
        - plexAuthToken: []
        - plexClientIdentifier: []
      tags:
        - Plex
tags:
  - name: RDB
  - name: YTS
  - name: OMDB
  - name: Plex
